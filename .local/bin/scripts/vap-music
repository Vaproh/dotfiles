#!/bin/bash

filter() { sed "/^volume:/d;s/\\[paused\\].*/ ÔÅå /g;/\\[playing\\].*/d;/^ERROR/Q" | paste -sd ' ' -;}

pidof -x sb-mpdup >/dev/null 2>&1 || sb-mpdup >/dev/null 2>&1 &

status=$(mpc status | filter | awk -v FS='-' '{print $2}' )

playing() {
  if [ -z "$status" ]; then
    :
  else
    echo "^c#f4b8e4^Û∞éá $status  "
  fi
}

case $BUTTON in
	1) mpc status | filter ; xdotool key super+x ;;  # right click, pause/unpause
	2) mpc toggle | filter ;;  # right click, pause/unpause
	3) mpc status | filter ; notify-send "üéµ Music module" "\- Shows mpd song playing.
- ‚è∏ when paused.
- Left click opens ncmpcpp.
- Middle click pauses.
- Scroll changes track.";;  # right click, pause/unpause
	4) mpc prev   | filter ;;  # scroll up, previous
	5) mpc next   | filter ;;  # scroll down, next
  *) playing ;;
esac
